{% extends "template/blog/base.html" %}

{% block content %}
    {% if query %}
        {% autoescape off %}
        您搜索的关键词: {{query}} 的结果如下: 
        {% endautoescape %}
        <hr/>
    {%endif%}

{% if posts %}
    {% for post in posts %}
        <div>
            <h3 class="post-element-title">
                <a href="{% url 'detail' post.id %}">{{ post.title }}</a>
            </h3>

            <div>
                <nav class="nav">
                      分类:<a class="nav-link post-element-nav"  href="{%url 'category' post.category_id %}">{{post.category.name}}</a>
                      标签:{% for tag in post.tag.all %}
                      <a href="{% url 'tag' tag.id%}" class="nav-link post-element-nav">
                          {{ tag.name }}
                      </a>
                      {% endfor %}
                      作者: <a class="nav-link  post-element-nav" href="{% url 'author' post.owner_id %}">{{post.owner.username}}</a>
                      创建时间:<a class="nav-link disabled post-element-nav" href="#">2017-10-26</a>
                </nav>
            </div>
        
            <div class="post-element-desc">
                <p>{{post.desc}}</p>
            </div>
        </div>      
    {% endfor %}

    {% if page_obj.has_previous %}
        {% if query %}
            <a href="?page={{ page_obj.previous_page_number}}&query={{query}}">上一页</a>
        {% else %}
            <a href="?page={{ page_obj.previous_page_number }}">上一页</a>
        {%endif%}
    {%endif%}

    Page {{page_obj.number}} of {{paginator.num_pages}}

    {% if page_obj.has_next %}
        {% if query %}
            <a href="?page={{ page_obj.next_page_number}}&query={{query}}">下一页</a>
        {% else %}
            <a href="?page={{ page_obj.next_page_number}}">下一页</a>
        {%endif%}
    {%endif%}

{% else %}
    Empty!
{% endif %}

{%endblock content%}



